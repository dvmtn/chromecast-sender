/*! chromecast_sender 2015-03-21 18:01 */
function initializeCastApi(){var a=new chrome.cast.SessionRequest(applicationID),b=new chrome.cast.ApiConfig(a,sessionListener,receiverListener);chrome.cast.initialize(b,onInitSuccess,onError)}function onInitSuccess(){appendMessage("onInitSuccess")}function onError(a){appendMessage("onError: "+JSON.stringify(a))}function onSuccess(a){appendMessage("onSuccess: "+a)}function onStopAppSuccess(){appendMessage("onStopAppSuccess")}function sessionListener(a){appendMessage("New session ID:"+a.sessionId),session=a,session.addUpdateListener(sessionUpdateListener),session.addMessageListener(namespace,receiverMessage)}function sessionUpdateListener(a){var b=a?"Session Updated":"Session Removed";b+=": "+session.sessionId,appendMessage(b),a||(session=null)}function receiverMessage(a,b){appendMessage("receiverMessage: "+a+", "+b)}function receiverListener(a){"available"===a?appendMessage("receiver found"):(console.log(a),appendMessage("receiver list empty"))}function stopApp(){session.stop(onStopAppSuccess,onError)}function sendMessage(a){null!==session?session.sendMessage(namespace,a,onSuccess.bind(this,"Message sent: "+a),onError):chrome.cast.requestSession(function(b){session=b,session.sendMessage(namespace,a,onSuccess.bind(this,"Message sent: "+a),onError)},onError)}function appendMessage(a){var b=document.getElementById("debugmessage");b.innerHTML+="\n"+JSON.stringify(a)}function update(){sendMessage(document.getElementById("input").value)}function transcribe(a){sendMessage(a)}!function(){var a=window.chrome||{};a.cast=a.cast||{},a.cast.media=a.cast.media||{},a.cast.ApiBootstrap_=function(){},a.cast.ApiBootstrap_.EXTENSION_IDS=["boadgeojelhgndaghljhdicfkmllpafd","dliochdbjfkdbacpmhlcpmleaejidimm","hfaagokkkhdbgiakmmlclaapfelnkoah","fmfcbgogabcbclcofgocippekhfcmgfj","enhhojjnijigcajfphajepfemndkmdlo"],a.cast.ApiBootstrap_.findInstalledExtension_=function(b){a.cast.ApiBootstrap_.findInstalledExtensionHelper_(0,b)},a.cast.ApiBootstrap_.findInstalledExtensionHelper_=function(b,c){b==a.cast.ApiBootstrap_.EXTENSION_IDS.length?c(null):a.cast.ApiBootstrap_.isExtensionInstalled_(a.cast.ApiBootstrap_.EXTENSION_IDS[b],function(d){d?c(a.cast.ApiBootstrap_.EXTENSION_IDS[b]):a.cast.ApiBootstrap_.findInstalledExtensionHelper_(b+1,c)})},a.cast.ApiBootstrap_.getCastSenderUrl_=function(a){return"chrome-extension://"+a+"/cast_sender.js"},a.cast.ApiBootstrap_.isExtensionInstalled_=function(b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){4==d.readyState&&200==d.status&&c(!0)},d.onerror=function(){c(!1)},d.open("GET",a.cast.ApiBootstrap_.getCastSenderUrl_(b),!0),d.send()},a.cast.ApiBootstrap_.findInstalledExtension_(function(b){if(b){console.log("Found cast extension: "+b),a.cast.extensionId=b;var c=document.createElement("script");c.src=a.cast.ApiBootstrap_.getCastSenderUrl_(b),(document.head||document.documentElement).appendChild(c)}else{var d="No cast extension found";console.log(d);var e=window.__onGCastApiAvailable;e&&"function"==typeof e&&e(!1,d)}})}();var applicationID="51F2093F",namespace="urn:x-cast:com.devmountain.helloworld",session=null;window.__onGCastApiAvailable=function(a,b){a?initializeCastApi():console.log(b)},window.addEventListener("load",function(){window.addEventListener("keydown",function(a){switch(a.which){case 37:sendMessage("left");break;case 38:sendMessage("up");break;case 39:sendMessage("right");break;case 40:sendMessage("down")}})});